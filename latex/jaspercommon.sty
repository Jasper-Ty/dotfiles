\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{jaspercommon}[Jasper's Common LaTeX Stuff]
\pdfminorversion=7


% == Options ==================================================================
% Garamond font
\newif\ifgaramond
\DeclareOption{garamond}{\garamondtrue}

% Tableau
\newif\iftableau
\DeclareOption{tableau}{\tableautrue}

% Done
\ProcessOptions


% == Font encoding stuff ======================================================
% \RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}
\RequirePackage{textcomp}


% == Math stuff ==============================================================
\RequirePackage{amsmath, mathtools, amsthm}


% == Graphics =================================================================
\RequirePackage{graphicx} % Mostly needed for \includegraphics{_}. 
\RequirePackage{xcolor}
\RequirePackage{tikz}
% \RequirePackage{pgfplots}


% == Little things ============================================================
\RequirePackage{url}      % \url command
\RequirePackage{booktabs} % Table optimizations
\RequirePackage{enumitem} % More enumerate-style environments


% == Some shortcuts ==========================================================
\newcommand\NN{\ensuremath{\mathbb{N}}}
\newcommand\RR{\ensuremath{\mathbb{R}}}
\newcommand\ZZ{\ensuremath{\mathbb{Z}}}
\newcommand\PP{\ensuremath{\mathbb{P}}}
\newcommand\OO{\ensuremath{\emptyset}}
\newcommand\QQ{\ensuremath{\mathbb{Q}}}
\newcommand\CC{\ensuremath{\mathbb{C}}}
\newcommand\KK{\ensuremath{\mathbb{K}}}


% == Environments ============================================================
% These are all based on Darij Grinberg's environment setup
% https://www.cip.ifi.lmu.de/~grinberg/index.html
\RequirePackage{framed}

\theoremstyle{definition}

\newtheorem{theo}{Theorem}[subsection]
\newtheorem*{theo*}{Theorem}
\newenvironment{theorem}[1][]
{\begin{theo}[#1]\begin{leftbar}}
{\end{leftbar}\end{theo}}
\newenvironment{theorem*}[1][]
{\begin{theo*}[#1]\begin{leftbar}}
{\end{leftbar}\end{theo*}}

\newtheorem{lem}[theo]{Lemma}
\newenvironment{lemma}[1][]
{\begin{lem}[#1]\begin{leftbar}}
{\end{leftbar}\end{lem}}

\newtheorem{prop}[theo]{Proposition}
\newenvironment{proposition}[1][]
{\begin{prop}[#1]\begin{leftbar}}
{\end{leftbar}\end{prop}}

\newtheorem{defi}[theo]{Definition}
\newenvironment{definition}[1][]
{\begin{defi}[#1]\begin{leftbar}}
{\end{leftbar}\end{defi}}

\newtheorem{remk}[theo]{Remark}
\newenvironment{remark}[1][]
{\begin{remk}[#1]\begin{leftbar}}
{\end{leftbar}\end{remk}}

\newtheorem{coro}[theo]{Corollary}
\newenvironment{corollary}[1][]
{\begin{coro}[#1]\begin{leftbar}}
{\end{leftbar}\end{coro}}

\newtheorem{conv}[theo]{Convention}
\newenvironment{convention}[1][]
{\begin{conv}[#1]\begin{leftbar}}
{\end{leftbar}\end{conv}}

\newtheorem{quest}[theo]{Question}
\newenvironment{question}[1][]
{\begin{quest}[#1]\begin{leftbar}}
{\end{leftbar}\end{quest}}

\newtheorem{warn}[theo]{Warning}
\newenvironment{warning}[1][]
{\begin{warn}[#1]\begin{leftbar}}
{\end{leftbar}\end{warn}}

\newtheorem{conj}[theo]{Conjecture}
\newenvironment{conjecture}[1][]
{\begin{conj}[#1]\begin{leftbar}}
{\end{leftbar}\end{conj}}

\newtheorem{exam}[theo]{Example}
\newenvironment{example}[1][]
{\begin{exam}[#1]\begin{leftbar}}
{\end{leftbar}\end{exam}}

\newtheorem{exer}[theo]{Exercise}
\newenvironment{exercise}[1][]
{\begin{exer}[#1]\begin{leftbar}}
{\end{leftbar}\end{exer}}

\newenvironment{statement}{\begin{quote}}{\end{quote}}
\newenvironment{fineprint}{\begin{small}}{\end{small}}

% == Links ====================================================================
\RequirePackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=red,
    filecolor=black,
    linkcolor=purple
}


% == Title setup =============================================================
\RequirePackage{titling}
\pretitle{\begin{flushright} \bfseries \Huge}
\posttitle{\end{flushright}}
\preauthor{\begin{flushright} \Large}
\postauthor{\end{flushright}}


% == Miscellaneous helper commands ===========================================
% hide 
\newcommand\hide[1]{}
% horizontal rule
\newcommand\hr{\noindent\rule[0.5ex]{\linewidth}{0.5pt}}
% todo
\newcommand{\todo}[1]{\textcolor{red}{TODO: #1}\PackageWarning{TODO:}{#1!}}


% == Geometry =================================================================
\usepackage{geometry}
\geometry{
    a5paper,
    left=18mm,
    right=16mm,
    top=22mm,
    bottom=24mm,
}


% == Headers ==================================================================
\RequirePackage{fancyhdr}
\pagestyle{fancy}

% Page numbers bottom right
\fancyfoot{}
\fancyfootoffset[R]{5pt}
\fancyfoot[R]{\thepage}

% Sets up title top left my name top right
\fancyheadoffset[L]{12pt}
\renewcommand{\headrulewidth}{0pt}
\newcommand{\titleauthorhead}{
    \makeatletter
    \fancyhead[L]{\textsc{\@title}}
    \fancyhead[R]{\textsc{\@author}}
    \makeatother
}


% == Other ====================================================================
% Hide page number for empty pages
\RequirePackage{emptypage}
% Captions
\RequirePackage{subcaption}
% Better tables
\RequirePackage{tabls}


% == Hacky nonsense I don't understand follows (thanks stackexchange!) ========
% %http://tex.stackexchange.com/questions/76273/multiple-pdfs-with-page-group-included-in-a-single-page-warning
\pdfsuppresswarningpagegroup=1
% http://tex.stackexchange.com/questions/22119/how-can-i-change-the-spacing-before-theorems-with-amsthm
\makeatletter
\def\thm@space@setup{%
  \thm@preskip=\parskip \thm@postskip=0pt
}
\makeatother


% == Use E.B Garamond font ===================================================
\ifgaramond
    \usepackage[ebgaramond]{newtx}
\fi


% == Use tableaux ============================================================
\iftableau
    \usepackage{ytableau}
\fi


% == DONE! ====================================================================
